info:
  title: LostInBerlin API
  description: Move your app forward with the LostInBerlin API
  version: "1.0.0"
# the domain of the service
host: lost-in-berlin.com
# array of all schemes that your API supports
schemes:
- https
# will be prefixed to all paths
basePath: /api/v1
securityDefinitions:
  apikey:
    type: token
    name: server_token
    in: header
produces:
- application/json
paths:
  /business:
    get:
      summary: Existing business profiles
      description: The endpoint returns information about business profiles available at a given location.
      The response includes the name and other details about each business, and lists the profiles
      in the proper display order.
      parameters:
      - name: location
        in: query
        description: Given location.
        required: true
        type: string
      security:
      - token: []
      tags:
      - business
      responses:
        "200":
          description: An array of profiles
          schema:
            type: array
            profiles:
              $ref: '#/definitions/Business'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'

    post:
      summary: Adds a new business profile
      description: The endpoint sends details of business profile provided during registration, containing content of the following fields: first name, last name, e-mail, phone, service location, short service description and an image.
        The response includes the result of the operation.
      requestBody:
        content:
          application/json:     # Media type
            schema:             # Request body contents
              $ref: '#/components/schemas/Business'   # Reference to an object
            examples:    # Child of media type
              Ada:   # Example 1
                value:
                  firstName: Ada
                  lastName: Polkanova
                  eMail: dogs4fun@dogmail.com
                  phone: +49 177 77777777
                  serviceLocation: Berlin
                  description: Hi, I'm Ada, the dog.
                  photo: image
      responses:
        "200":
          description: Result of the operation
          schema:
            type: long

        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    put:
      summary: Updates a business profile
      description: The endpoint updates details of business profile previously retrieved from the database, containing content of the following fields: id, first name, last name, e-mail, phone, service location, short service description and an image.
                     The response includes the result of the operation.
      requestBody:
        content:
          application/json:     # Media type
            schema:             # Request body contents
              $ref: '#/components/schemas/Business'   # Reference to an object
            examples:    # Child of media type
              Ada:   # Example 1
                value:
                  id: 10
                  firstName: Ada
                  lastName: Polkanova
                  eMail: dogs4fun@dogmail.com
                  phone: +49 177 77777777
                  serviceLocation: Berlin
                  description: Hi, I'm Ada, the dog.
                  photo: image
      responses:
        "200":
          description: Result of the operation
          schema:
            type: long

        "403":
          description: Unauthorized
          schema:
            $ref: '#/definitions/Error'

        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'

  /business/{id}:
    get:
      summary: Fetch a business profile
      description: The endpoint returns information about a business profile with a given id.
      The response includes the name and other details about the business.
      parameters:
      - name: id
        in: url
        description: Profile id
        required: true
        type: string
      security:
      - token: []
      tags:
      - business profile
      responses:
        "200":
          description:  Profile fields
          schema:
            type: json
            profile:
              $ref: '#/definitions/Business'
        "403":
          description: Unauthorized for the current operation
          schema:
            $ref: '#/definitions/Error'
        "404":
          description: Profile not found
          schema:
            $ref: '#/definitions/Error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
/business:
  get:
    summary: Existing business profiles
    description: The endpoint returns information about business profiles available at a given location.
    The response includes the name and other details about each business, and lists the profiles
    in the proper display order.
    parameters:
    - name: location
      in: query
      description: Given location.
      required: true
      type: string
    security:
    - token: []
    tags:
    - business
    responses:
      "200":
        description: An array of profiles
        schema:
          type: array
          profiles:
            $ref: '#/definitions/Business'
      default:
        description: Unexpected error
        schema:
          $ref: '#/definitions/Error'

  post:
    summary: Adds a new business profile
    description: The endpoint sends details of business profile provided during registration, containing content of the following fields: first name, last name, e-mail, phone, service location, short service description and an image.
                   The response includes the result of the operation.
    requestBody:
      content:
        application/json:     # Media type
          schema:             # Request body contents
            $ref: '#/components/schemas/Business'   # Reference to an object
          examples:    # Child of media type
            Ada:   # Example 1
              value:
                firstName: Ada
                lastName: Polkanova
                eMail: dogs4fun@dogmail.com
                phone: +49 177 77777777
                serviceLocation: Berlin
                description: Hi, I'm Ada, the dog.
                photo: image
    responses:
      "200":
        description: Result of the operation
        schema:
          type: long

      default:
        description: Unexpected error
        schema:
          $ref: '#/definitions/Error'
  put:
    summary: Updates a business profile
    description: The endpoint updates details of business profile previously retrieved from the database, containing content of the following fields: id, first name, last name, e-mail, phone, service location, short service description and an image.
                   The response includes the result of the operation.
    requestBody:
      content:
        application/json:     # Media type
          schema:             # Request body contents
            $ref: '#/components/schemas/Business'   # Reference to an object
          examples:    # Child of media type
            Ada:   # Example 1
              value:
                id: 10
                firstName: Ada
                lastName: Polkanova
                eMail: dogs4fun@dogmail.com
                phone: +49 177 77777777
                serviceLocation: Berlin
                description: Hi, I'm Ada, the dog.
                photo: image
    responses:
      "200":
        description: Result of the operation
        schema:
          type: long

      "403":
        description: Unauthorized
        schema:
          $ref: '#/definitions/Error'

      default:
        description: Unexpected error
        schema:
          $ref: '#/definitions/Error'

  /business/{id}:
    get:
      summary: Fetch a business profile
      description: The endpoint returns information about a business profile with a given id.
      The response includes the name and other details about the business.
      parameters:
      - name: id
        in: url
        description: Profile id
        required: true
        type: string
      security:
      - token: []
      tags:
      - business profile
      responses:
        "200":
          description:  Profile fields
          schema:
            type: json
            profile:
              $ref: '#/definitions/Business'
        "403":
          description: Unauthorized for the current operation
          schema:
            $ref: '#/definitions/Error'
        "404":
          description: Profile not found
          schema:
            $ref: '#/definitions/Error'
        default:
          description: Unexpected error
          schema:
            $ref: '#/definitions/Error'
    /orders:
      get:
        summary: Existing orders
        description: The endpoint returns information about orders assigned to this business.
        The response includes the order details, and lists the orders according to their execution time.
        parameters:
        - name: business id
          in: query
          description: id of the current business
          required: true
          type: string
        security:
        - token: []
        tags:
        - orders
        responses:
          "200":
            description: An array of orders
            schema:
              type: array
              orders:
                $ref: '#/definitions/Order'
          default:
            description: Unexpected error
            schema:
              $ref: '#/definitions/Error'

      post:
        summary: Adds a new order
        description: The endpoint sends details of an order provided by the client, containing content of the following fields: name, phone number, e-mail, date, time, number of participants and additional order information.
                       The response includes the result of the operation.
        requestBody:
          content:
            application/json:     # Media type
              schema:             # Request body contents
                $ref: '#/components/schemas/Order'   # Reference to an object
              examples:    # Child of media type
                Lena:   # Example 1
                  value:
                    name: Lena
                    phone: +49 176 68558497
                    eMail: aoneko@gmx.de
                    date: 27.09.2018
                    time: 15:00-20:00
                    numberParticipants: 1
                    description: Hi, I want a dog sled tour in Berlin.
        responses:
          "200":
            description: Result of the operation
            schema:
              type: long

          default:
            description: Unexpected error
            schema:
              $ref: '#/definitions/Error'

      /order/{id}:
        get:
          summary: Fetch an order
          description: The endpoint returns information about an order with a given id.
          The response includes the name and other details about the order.
          parameters:
          - name: id
            in: url
            description: Order id
            required: true
            type: string
          security:
          - token: []
          tags:
          - order details
          responses:
            "200":
              description:  Order details fields
              schema:
                type: json
                order:
                  $ref: '#/definitions/Order'
            "403":
              description: Unauthorized for the current operation
              schema:
                $ref: '#/definitions/Error'
            "404":
              description: Order not found
              schema:
                $ref: '#/definitions/Error'
            default:
              description: Unexpected error
              schema:
                $ref: '#/definitions/Error'
      /status/{id}:
        get:
          summary: Return current order status
          description: The endpoint returns current status of an order with a given id.
          The response includes the status string.
          parameters:
          - name: id
            in: url
            description: Order id
            required: true
            type: string
          security:
          - token: []
          tags:
          - order status
          responses:
            "200":
              description:  Order status
              schema:
                type: string
            "403":
              description: Unauthorized for the current operation
              schema:
                $ref: '#/definitions/Error'
            "404":
              description: Order not found
              schema:
                $ref: '#/definitions/Error'
            default:
              description: Unexpected error
              schema:
                $ref: '#/definitions/Error'
          put:
            summary: Updates current order status
            description: The endpoint updates current status of an order with a given id.
            The response includes the result of the operation.
            parameters:
            - name: id
              in: url
              description: Order id
              required: true
              type: string
            security:
            - token: []
            tags:
            - order status
            requestBody:
              content:
                application/text:     # Media type
                  examples: pending
            responses:
              "200":
                description:  Order status
                schema:
                  type: string
              "403":
                description: Unauthorized for the current operation
                schema:
                  $ref: '#/definitions/Error'
              default:
                description: Unexpected error
                schema:
                  $ref: '#/definitions/Error'
definitions:
  Business:
    properties:
      id:
        type: string
        description: Unique identifier representing a specific business.
      firstName:
        type: string
        description: First name of a business.
      lastName:
        type: string
        description: Last name of a business.
      eMail:
        type: string
        description: E-Mail of a business.
      phone:
        type: string
        description: Phone of a business.
      serviceLocation:
        type: string
        description:  Location, where business offers a service.
      description:
        type: string
        description: Description of a business and offered service.
      photo:
        type: bitmap
        description: Image representing the business.
  BusinessList:
    properties:
      businesses:
        description: Contains the list of businesses
        type: array
        businesses:
          $ref: "#/definitions/Business"
  Order:
    properties:
      id:
        type: string
        description: Unique identifier representing a specific order.
      name:
        type: string
        description: Client's name.
      phone:
        type: string
        description: Client's phone number.
      eMail:
        type: string
        description: Client's e-mail.
      date:
        type: date
        description: Date, when the service is requested.
      time:
        type: string
        description: Time, when the service is requested.
      numberParticipants:
        type: long
        description: Number of participants on the order.
      description:
        type: string
        description: Description of an order.
    OrderList:
      properties:
        orders:
          description: Contains the list of orders
          type: array
          orders:
            $ref: "#/definitions/Order"
  Error:
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      fields:
        type: string
